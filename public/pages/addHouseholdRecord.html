<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <link rel="stylesheet" href="./../css/dashboard.css" />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
    />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css"
    />
    <link
      rel="stylesheet"
      href="https://cdn.datatables.net/2.2.2/css/dataTables.bootstrap5.css"
    />
  </head>
  <body>
    <div class="container-main">
      <div class="sidebar" id="sidebar">
        <div class="logo-container">
          <img
            src="./../assets/logo/logo.jpg"
            alt="Barangay Logo"
            class="logo"
          />
        </div>
        <div class="menu-items">
          <div class="menu-item active">
            <a href="dashboard.html">Dashboard</a>
          </div>

          <div class="menu-item dropdown">
            <span class="dropdown-toggle">Healthcare Management</span>
            <div class="dropdown-content">
              <a href="children-record.html">Children Record</a>
              <a href="pregnant-record.html">Pregnant Record</a>
              <a href="household-record.html">Household Record</a>
              <a href="healthcare_inventory.html"> Inventory Records</a>
             
            </div>
          </div>

          <div class="menu-item dropdown">
            <span class="dropdown-toggle">Record Management</span>
            <div class="dropdown-content">
              <a href="issuance-record.html">Issuance Record</a>
              <a href="complain.html">Complain</a>
              <a href="appointmentsRecord.html">Appointment Record</a>
              <a href="capAvailability.html">Availability</a>
              <a href="barangayInventory.html">Inventory Management</a>
            </div>
          </div>
          <div class="menu-item"><a href="settings.html">Setiings</a></div>
        </div>
      </div>

      <div class="main-content">
        <div class="header">
          <button class="menu-toggle" id="menuToggle">‚ò∞</button>

          <div class="header-title">Barangay Management System</div>
          <div class="header-actions">
            <div class="header-icon">üîî</div>
            <div class="header-icon">‚úâÔ∏è</div>
            <div class="user-avatar">üë§</div>
          </div>
        </div>
        <div
          class="dashboard-title"
          style="display: flex; justify-content: space-between"
        >
          <h3>Household Record</h3>
          
          
        </div>
        <div class="dashboard-content">
          <div class="main-chart">
            <div class="container my-5 p-4 bg-white rounded shadow-lg">
                <h1 class="h2 mb-4">Household Profiling Form</h1>
            
                <!-- Household Information -->
                <div class="row">
                  <div class="col-md-6">
                    <div class="form-group">
                      <label for="visitDate">Date of Visit*</label>
                      <input id="visitDate" type="date" class="form-control" />
                    </div>
                  </div>
                  <div class="col-md-6">
                    <div class="form-group">
                      <label for="householdNumber">Household Number*</label>
                      <input id="householdNumber" type="text" class="form-control" placeholder="yyyymm-facilitycode-00000" />
                    </div>
                  </div>
                  <div class="col-md-6">
                    <div class="form-group">
                      <label for="barangay">Barangay*</label>
                      <input id="barangay" type="text" class="form-control" />
                    </div>
                  </div>
                  <div class="col-md-6">
                    <div class="form-group">
                      <label for="numberOfFamilies">No. of Families*</label>
                      <input id="numberOfFamilies" type="number" class="form-control" />
                    </div>
                  </div>
                </div>
            
                <!-- Household Member Form -->
                <h2 class="h4 mt-5 mb-3">Add Household Member</h2>
                <div class="row">
                  <div class="col-md-6">
                    <div class="form-group">
                      <label for="memberFullName">Full Name*</label>
                      <input id="memberFullName" type="text" class="form-control" placeholder="Last, First, Middle" />
                    </div>
                  </div>
                  <div class="col-md-6">
                    <div class="form-group">
                      <label for="memberGender">Gender*</label>
                      <select id="memberGender" class="form-control">
                        <option value="">Select</option>
                        <option value="M">Male</option>
                        <option value="F">Female</option>
                      </select>
                    </div>
                  </div>
                  <div class="col-md-6">
                    <div class="form-group">
                      <label for="memberCivilStatus">Civil Status*</label>
                      <select id="memberCivilStatus" class="form-control">
                        <option value="">Select</option>
                        <option value="S">Single</option>
                        <option value="M">Married</option>
                        <option value="L">Lived In</option>
                        <option value="W">Widow/er</option>
                        <option value="SP">Separated</option>
                        <option value="C">Cohabitation</option>
                      </select>
                    </div>
                  </div>
                  <div class="col-md-6">
                    <div class="form-group">
                      <label for="memberEducation">Educational Attainment*</label>
                      <input id="memberEducation" type="text" class="form-control" />
                    </div>
                  </div>
                  <div class="col-md-6">
                    <div class="form-group">
                      <label for="memberReligion">Religion*</label>
                      <input id="memberReligion" type="text" class="form-control" />
                    </div>
                  </div>
                </div>
            
                <button onclick="addMember()" class="btn btn-primary mt-3">
                  ‚ûï Add Member
                </button>
            
                <!-- Household Members List -->
                <div id="membersSection" class="mt-5 d-none">
                  <h3 class="h5 mb-3">Household Members</h3>
                  <table class="table table-striped">
                    <thead class="thead-light">
                      <tr>
                        <th>Name</th>
                        <th>Gender</th>
                        <th>Civil Status</th>
                        <th>Education</th>
                        <th>Religion</th>
                      </tr>
                    </thead>
                    <tbody id="membersList"></tbody>
                  </table>
                </div>
            
                <!-- Submit Household Button -->
                <button onclick="submitHousehold()" class="btn btn-success mt-4">
                  ‚úÖ Submit Household
                </button>
              </div>
            
              <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
              <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.2/dist/umd/popper.min.js"></script>
              <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
            
              <script>
                let members = [];
                let householdRecords = JSON.parse(localStorage.getItem("householdRecords")) || [];
            
                function saveHouseholdsToStorage() {
                  localStorage.setItem("householdRecords", JSON.stringify(householdRecords));
                }
            
                function renderMembers() {
                  const list = document.getElementById("membersList");
                  list.innerHTML = "";
                  members.forEach(member => {
                    const row = document.createElement("tr");
                    row.innerHTML = `
                      <td>${member.name}</td>
                      <td>${member.gender}</td>
                      <td>${member.status}</td>
                      <td>${member.education}</td>
                      <td>${member.religion}</td>
                    `;
                    list.appendChild(row);
                  });
            
                  document.getElementById("membersSection").classList.toggle("d-none", members.length === 0);
                }
            
                function addMember() {
                  const name = document.getElementById("memberFullName").value.trim();
                  const gender = document.getElementById("memberGender").value;
                  const status = document.getElementById("memberCivilStatus").value;
                  const education = document.getElementById("memberEducation").value.trim();
                  const religion = document.getElementById("memberReligion").value.trim();
            
                  if (!name || !gender || !status || !education || !religion) {
                    alert("Please fill in all household member fields.");
                    return;
                  }
            
                  const member = { name, gender, status, education, religion };
                  members.push(member);
                  renderMembers();
            
                  document.getElementById("memberFullName").value = "";
                  document.getElementById("memberGender").value = "";
                  document.getElementById("memberCivilStatus").value = "";
                  document.getElementById("memberEducation").value = "";
                  document.getElementById("memberReligion").value = "";
                }
            
                function submitHousehold() {
                  const date = document.getElementById("visitDate").value;
                  const householdNumber = document.getElementById("householdNumber").value.trim();
                  const barangay = document.getElementById("barangay").value.trim();
                  const families = document.getElementById("numberOfFamilies").value;
            
                  if (!date || !householdNumber || !barangay || !families || members.length === 0) {
                    alert("Please complete all household fields and add at least one member.");
                    return;
                  }
            
                  const record = {
                    date,
                    householdNumber,
                    barangay,
                    families,
                    members: [...members]
                  };
            
                  householdRecords.push(record);
                  saveHouseholdsToStorage();
            
                  // Clear all fields
                  document.getElementById("visitDate").value = "";
                  document.getElementById("householdNumber").value = "";
                  document.getElementById("barangay").value = "";
                  document.getElementById("numberOfFamilies").value = "";
                  members = [];
                  renderMembers();
            
                  alert("Household submitted successfully! ‚úÖ You can now enter another.");
                }
            
                window.onload = renderMembers;
              </script>
          </div>
        </div>
      </div>
    </div>
    <script src="script.js"></script>
    <script src="https://code.jquery.com/jquery-3.7.1.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/5.3.0/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.datatables.net/2.2.2/js/dataTables.js"></script>
    <script src="https://cdn.datatables.net/2.2.2/js/dataTables.bootstrap5.js"></script>
    <script>
      new DataTable("#example");
    </script>
  </body>
</html>
